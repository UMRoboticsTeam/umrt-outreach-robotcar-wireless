<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>UMRT RobotCar Controller</title>
        <style>
          :root {
            /* --button-highlight: #ff3034; */
            /* --button-hover: #ff494d, */
            /* --button-active: #f21c21, */
            --button-highlight: #4871b8;
            --button-hover: #5280D1;
            --button-active: #3656A3;
          }
            body {
                /* font-family: Arial,Helvetica,sans-serif; */
                font-family: Courier, monospace;
                background: #181818;
                color: #EFEFEF;
                font-size: 16px
            }

            h2 {
                font-size: 18px
            }

            section.main {
                display: flex
            }

            #menu,section.main {
                flex-direction: column
            }

            #menu {
                display: none;
                flex-wrap: nowrap;
                min-width: 340px;
                background: #363636;
                padding: 8px;
                border-radius: 4px;
                margin-top: -10px;
                margin-right: 10px;
            }

            #content {
                display: flex;
                flex-wrap: wrap;
                align-items: stretch;
                /* align-items: center; */
            }

            figure {
                padding: 0px;
                margin: 0;
                -webkit-margin-before: 0;
                margin-block-start: 0;
                -webkit-margin-after: 0;
                margin-block-end: 0;
                -webkit-margin-start: 0;
                margin-inline-start: 0;
                -webkit-margin-end: 0;
                margin-inline-end: 0
            }

            figure img {
                display: block;
                width: 100%;
                height: auto;
                border-radius: 4px;
                margin-top: 8px;
            }

            @media (min-width: 800px) and (orientation:landscape) {
                #content {
                    display:flex;
                    flex-wrap: nowrap;
                    align-items: stretch
                }

                figure img {
                    display: block;
                    max-width: 100%;
                    max-height: calc(100vh - 40px);
                    width: auto;
                    height: auto
                }

                figure {
                    padding: 0 0 0 0px;
                    margin: 0;
                    -webkit-margin-before: 0;
                    margin-block-start: 0;
                    -webkit-margin-after: 0;
                    margin-block-end: 0;
                    -webkit-margin-start: 0;
                    margin-inline-start: 0;
                    -webkit-margin-end: 0;
                    margin-inline-end: 0
                }
            }

            section#buttons {
                display: flex;
                flex-wrap: nowrap;
                justify-content: space-between
            }

            #nav-toggle {
                cursor: pointer;
                display: block
            }

            #nav-toggle-cb {
                outline: 0;
                opacity: 0;
                width: 0;
                height: 0
            }

            #nav-toggle-cb:checked+#menu {
                display: flex
            }

            .input-group {
                display: flex;
                flex-wrap: nowrap;
                line-height: 22px;
                margin: 5px 0
            }

            .input-group>label {
                display: inline-block;
                padding-right: 10px;
                min-width: 47%
            }

            .input-group input,.input-group select {
                flex-grow: 1
            }

            .range-max,.range-min {
                display: inline-block;
                padding: 0 5px
            }

            button, .button {
                display: block;
                margin: 5px;
                padding: 0 12px;
                border: 0;
                line-height: 28px;
                cursor: pointer;
                color: #fff;
                background: var(--button-highlight);
                border-radius: 5px;
                font-size: 16px;
                outline: 0
            }

            .save {
                position: absolute;
                right: 25px;
                top: 0px;
                height: 16px;
                line-height: 16px;
                padding: 0 4px;
                text-decoration: none;
                cursor: pointer
            }

            button:hover {
                background: var(--button-hover)
            }

            button:active {
                background: var(--button-active)
            }

            button.disabled {
                cursor: default;
                background: #a0a0a0
            }

            input[type=range] {
                -webkit-appearance: none;
                width: 100%;
                height: 22px;
                background: #363636;
                cursor: pointer;
                margin: 0
            }

            input[type=range]:focus {
                outline: 0
            }

            input[type=range]::-webkit-slider-runnable-track {
                width: 100%;
                height: 2px;
                cursor: pointer;
                background: #EFEFEF;
                border-radius: 0;
                border: 0 solid #EFEFEF
            }

            input[type=range]::-webkit-slider-thumb {
                border: 1px solid rgba(0,0,30,0);
                height: 22px;
                width: 22px;
                border-radius: 50px;
                background: var(--button-highlight);
                cursor: pointer;
                -webkit-appearance: none;
                margin-top: -11.5px
            }

            input[type=range]:focus::-webkit-slider-runnable-track {
                background: #EFEFEF
            }

            input[type=range]::-moz-range-track {
                width: 100%;
                height: 2px;
                cursor: pointer;
                background: #EFEFEF;
                border-radius: 0;
                border: 0 solid #EFEFEF
            }

            input[type=range]::-moz-range-thumb {
                border: 1px solid rgba(0,0,30,0);
                height: 22px;
                width: 22px;
                border-radius: 50px;
                background: var(--button-highlight);
                cursor: pointer
            }

            input[type=range]::-ms-track {
                width: 100%;
                height: 2px;
                cursor: pointer;
                background: 0 0;
                border-color: transparent;
                color: transparent
            }

            input[type=range]::-ms-fill-lower {
                background: #EFEFEF;
                border: 0 solid #EFEFEF;
                border-radius: 0
            }

            input[type=range]::-ms-fill-upper {
                background: #EFEFEF;
                border: 0 solid #EFEFEF;
                border-radius: 0
            }

            input[type=range]::-ms-thumb {
                border: 1px solid rgba(0,0,30,0);
                height: 22px;
                width: 22px;
                border-radius: 50px;
                background: var(--button-highlight);
                cursor: pointer;
                height: 2px
            }

            input[type=range]:focus::-ms-fill-lower {
                background: #EFEFEF
            }

            input[type=range]:focus::-ms-fill-upper {
                background: #363636
            }

            .switch {
                display: block;
                position: relative;
                line-height: 22px;
                font-size: 16px;
                height: 22px
            }

            .switch input {
                outline: 0;
                opacity: 0;
                width: 0;
                height: 0
            }

            .slider {
                width: 50px;
                height: 22px;
                border-radius: 22px;
                cursor: pointer;
                background-color: grey
            }

            .slider,.slider:before {
                display: inline-block;
                transition: .4s
            }

            .slider:before {
                position: relative;
                content: "";
                border-radius: 50%;
                height: 16px;
                width: 16px;
                left: 4px;
                top: 3px;
                background-color: #fff
            }

            input:checked+.slider {
                background-color: var(--button-highlight);
            }

            input:checked+.slider:before {
                -webkit-transform: translateX(26px);
                transform: translateX(26px)
            }

            select {
                border: 1px solid #363636;
                font-size: 14px;
                height: 22px;
                outline: 0;
                border-radius: 5px
            }

            .image-container {
                position: relative;
                min-width: 160px
            }

            .close {
                position: absolute;
                right: 5px;
                top: 5px;
                background: var(--button-highlight);
                width: 16px;
                height: 16px;
                border-radius: 100px;
                color: #fff;
                text-align: center;
                line-height: 18px;
                cursor: pointer
            }

            .hidden {
                display: none !important
            }

            input[type=text] {
                border: 1px solid #363636;
                font-size: 14px;
                height: 20px;
                margin: 1px;
                outline: 0;
                border-radius: 5px
            }

            .inline-button {
                line-height: 20px;
                margin: 2px;
                padding: 1px 4px 2px 4px;
            }

            label.toggle-section-label {
                cursor: pointer;
                display: block
            }

            input.toggle-section-button {
                outline: 0;
                opacity: 0;
                width: 0;
                height: 0
            }

            input.toggle-section-button:checked+section.toggle-section {
                display: none
            }

            html, body {
                margin: 0;
                padding: 0;
                height: 100%;
            }

            .main {
                display: flex;
                flex-direction: column;
                height: 100%;
            }

            #header {
                height: 100px;
                background: #333;
                color: white;
                display: flex;
                align-items: center;
                padding: 0 1rem;
                justify-content: space-between;
            }
            @media only screen and (max-width: 900px) {
              #header {
                display: none;
              }
            }

            #content {
                flex: 1;
                display: flex;
                overflow: hidden;
            }

            #sidebar {
                /* width: 333px; */
                display: flex;
                flex-direction: column;
                overflow: hidden;
            }

            #menu {
                overflow-y: auto;
                overflow-x: hidden;
                flex: 1;
                padding: 1rem;
            }

            #sidebar.hidden {
                display: none;
            }

            /* figure {
              flex: 1;
              margin: 0;
              display: flex;
              flex-direction: column;
              justify-content: center;
              align-items: center;
              overflow: hidden;
            } */
            figure {
                flex: 1;
                margin: 0;
                display: flex;
                flex-direction: column;
                overflow: hidden;
                /* height: 200%; */
            }

            .image-container {
                flex: 1;
                padding: 1rem;
                box-sizing: border-box;
                display: flex;
                justify-content: center;
                align-items: center;
                overflow: hidden;
            }

            #stream {
                width: 100%;
                height: 100%;
                object-fit: contain;
                display: block;
            }

            #stream-container {
              /* resize: both; */
            }

            #controls {
                /* height: 30%; */
                border-top: 1px solid #ccc;
                /* padding: 1rem; */
                padding: 0.4rem 0;
                /* box-sizing: border-box; */
                display: flex;
                /* align-items: center; */
                justify-content: space-around;
                user-select: none;
                overflow: hidden;
            }

            .key-group {
                display: flex;
                flex-direction: column;
                gap: 0.3rem;
                user-select: none;
                /* font-family: sans-serif; */
                font-family: Courier, monospace;
                /* margin: 0 50px; */
                text-align: center;
                justify-content: end;
                user-select: none;
            }

            .key-group .row {
                display: flex;
                justify-content: center;
                gap: 0.3rem;
            }

            .key-group .key {
                width: 2.5rem;
                height: 2.5rem;
                background: #666666;
                border-radius: 0.3rem;
                display: flex;
                justify-content: center;
                align-items: center;
                font-weight: bold;
                /* box-shadow: inset 0 0 2px #aaa; */
                /* transition: background 0.1s, transform 0.1s; */

                box-shadow: 2px 2px 2px 0px #333333;
                cursor: pointer;
            }

            .key-group .key.active {
                /* background: #333333; */
                background: var(--button-highlight);
                /* color: white; */
                /* transform: scale(0.9); */
                transform: translate(1px, 2px);
                box-shadow: none;
                /* box-shadow: 2px 2px 2px 0px #333333; */
            }

            .pwd-group {
              display: flex;
              flex-direction: column;
              align-items: center;
            }

            .enter-code {
                width: 10rem;
                height: 2.5rem;
                background: #666666;
                border-radius: 0.3rem;
                display: flex;
                justify-content: center;
                align-items: center;
                font-weight: bold;
                /* box-shadow: inset 0 0 2px #aaa; */
                /* transition: background 0.1s, transform 0.1s; */

                box-shadow: 2px 2px 2px 0px #333333;
                cursor: pointer;
            }

            .enter-code .key.active {
                /* background: #333333; */
                background: var(--button-highlight);
                /* color: white; */
                /* transform: scale(0.9); */
                transform: translate(1px, 2px);
                box-shadow: none;
                /* box-shadow: 2px 2px 2px 0px #333333; */
            }

            .pwd-input {
              height: 2rem;
              width: 15rem;
              font-size: 2rem;
              text-transform: uppercase;
            }
            



            #popup-overlay {
              position: fixed;
              top: 0; left: 0;
              width: 100%; height: 100%;
              background: rgba(0, 0, 0, 0.5);
              display: flex;
              align-items: center;
              justify-content: center;
              z-index: 1000;
            }

            #popup-content-granted,
            #popup-content-denied {
              background: white;
              padding: 20px 40px;
              border-radius: 10px;
              text-align: center;
              box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            }

        </style>
    </head>
    <body>
        <!-- password popups -->
        <div id="popup-overlay" style="display: none;">
          <div id="popup-content-granted" style="display: none;">
            <p style="color: green; font-size: 24px; font-weight: bold;">Access Granted</p>
          </div>
          <div id="popup-content-denied" style="display: none;">
            <p style="color: red; font-size: 24px; font-weight: bold;">Access Denied</p>
          </div>
        </div>

        <section class="main">
            <div id="header">
                <label for="nav-toggle-cb" id="nav-toggle">SmartRobot</label>
                <!-- <h1>UMRT</h1> -->
                <?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg version="1.1" width="80" viewBox="0 0 317.20117 297.75" id="svg22" sodipodi:docname="UMRT LOGO Large.svg" inkscape:version="1.3.2 (091e20e, 2023-11-25, custom)" inkscape:export-filename="UMRT LOGO.png" inkscape:export-xdpi="4096" inkscape:export-ydpi="4096" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <sodipodi:namedview id="namedview22" pagecolor="#3f3f3f" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="true" inkscape:deskcolor="#d1d1d1" inkscape:zoom="1.4142136" inkscape:cx="193.3937" inkscape:cy="70.357123" inkscape:window-width="1920" inkscape:window-height="991" inkscape:window-x="-9" inkscape:window-y="-9" inkscape:window-maximized="1" inkscape:current-layer="svg22" shape-rendering="crispEdges" inkscape:document-units="in" /> <defs id="defs5"> <clipPath id="clip_0"> <path transform="scale(0.24)" d="M 0,0 H 1562.5 V 1562.5 H 0 Z" fill-rule="evenodd" id="path1" /> </clipPath> <clipPath id="clip_1"> <path transform="scale(0.24)" d="M 0,0 H 1562.5 V 1562.5 H 0 Z" fill-rule="evenodd" id="path2" /> </clipPath> <clipPath id="clip_2"> <path transform="scale(0.24)" d="M 160.27504,160.27504 H 1400.9 V 1400.9 H 160.27504 Z" fill-rule="evenodd" id="path3" /> </clipPath> <clipPath id="clip_3"> <path transform="scale(0.24)" d="M 1255.396,525.55099 H 1562.5 v 468.75 h -307.104 z" fill-rule="evenodd" id="path4" /> </clipPath> <clipPath id="clip_4"> <path transform="scale(0.24)" d="M 0,0 H 1562.5 V 1562.5 H 0 Z" fill-rule="evenodd" id="path5" /> </clipPath> </defs> <path d="M -30.722658,-38.466011 H 344.27734 V 336.53399 H -30.722658 Z" id="path7" style="display:none;stroke-width:0.75" inkscape:label="Background" /> <g clip-path="url(#clip_2)" id="g13" style="display:inline" inkscape:label="Back Logo" transform="translate(-30.722658,-38.466011)"> <path transform="matrix(0.5844439,0,0,0.5844439,37.881567,37.881567)" d="M 180.26,41 V 81.869998 C 163.90999,85.96999 149.37999,92.06 135.93,99.84 l -28.91001,-28.92 -66.1,66.09999 28.92,28.91001 c -7.78,13.44999 -13.87,27.97999 -17.970001,43.33 H 11 v 93.48 h 40.87 c 4.099999,15.35 10.189999,29.88 17.97,43.33 l -28.92,28.91 66.1,66.10003 28.91,-28.92003 c 13.44999,7.78 27.97999,13.87 44.33,17.97 V 471 h 55.08999 v -60 l 8.65,-7.667 -8.65,-7.653 L 166.667,256 235.35,116.32001 244,99.333 235.35,91 V 41 Z" fill="#545454" id="path8" style="display:inline" inkscape:label="Fill Left Outer" /> <path transform="matrix(0.5844439,0,0,0.5844439,37.881567,37.881567)" d="M 235.35,116.46 291.333,244.807 235.35,395.82 c -1.75,0.21 -6.21,0.32 -9.35,0.32 -77.32,0 -140,-62.67997 -140,-140 0,-77.32 62.68,-139.99998 140,-139.99998 3.14,-2e-5 7.6,0.10998 9.35,0.31998 z" fill="#d9d9d9" id="path9" style="display:inline" inkscape:label="Fill Left Inner" /> <path transform="matrix(0.5844439,0,0,0.5844439,37.881567,37.881567)" d="m 235.35,91 c 0,13.282 0,308.286 0,320 22.352,0 163.543,0 185.65,0 0,-38.315 0,-282.40701 0,-320 -5.807,0 -181.594,0 -185.65,0 z" fill="#d9d9d9" id="path10" style="display:inline" inkscape:label="Fill Right" /> <path transform="matrix(0.5844439,0,0,0.5844439,37.881567,37.881567)" d="m 431,91 c 0,-5.523 -4.478,-10 -10,-10 H 391 V 41 h 15 c 5.522,0 10,-4.477 10,-10 0,-5.522998 -4.478,-10 -10,-10 h -25 c -5.522,0 -10,4.477002 -10,10 V 81 H 351 V 11 C 351,5.477 346.522,1 341,1 335.478,1 331,5.477 331,11 V 81 H 311 V 31 c 0,-5.522998 -4.478,-10 -10,-10 h -25 c -5.522,0 -10,4.477002 -10,10 0,5.523 4.478,10 10,10 h 15 V 81 H 245.35 V 41 c 0,-5.523 -4.47799,-10 -10,-10 h -55.08999 c -5.52201,0 -10,4.477 -10,10 v 33.235 c -11.338,3.352 -22.097,7.717 -32.573,13.217 L 114.092,63.85 c -3.90499,-3.907002 -10.23799,-3.905 -14.143991,-0.001 l -66.1,66.101 c -3.905002,3.906 -3.903001,10.238 9.99e-4,14.143 l 23.603001,23.595 c -5.32,10.12601 -9.704999,20.69701 -13.097,31.573 H 11 c -5.522,0 -10,4.477 -10,10 v 93.48 c 0,5.522 4.478,10 10,10 h 33.355 c 3.391999,10.875 7.776,21.446 13.097,31.573 L 33.85,367.908 c -3.904,3.90399 -3.905002,10.238 -0.001,14.144 l 66.1,66.1 c 3.905,3.90303 10.239,3.904 14.144,-10e-4 l 23.59499,-23.603 c 10.476,5.5 21.235,9.866 32.573,13.217 V 471 c 0,5.522 4.478,10 10,10 h 55.09 c 5.522,0 10,-4.478 10,-10 V 421 H 291 v 40 h -15 c -5.522,0 -10,4.478 -10,10 0,5.522 4.478,10 10,10 h 25 c 5.522,0 10,-4.478 10,-10 v -50 h 20 v 80 c 0,5.522 4.478,10 10,10 5.522,0 10,-4.478 10,-10 v -80 h 20 v 50 c 0,5.522 4.478,10 10,10 h 25 c 5.522,0 10,-4.478 10,-10 0,-5.522 -4.478,-10 -10,-10 h -15 v -40 h 30 c 5.522,0 10,-4.478 10,-10 z M 225.35,385.992 C 153.966,385.64 96,327.465 96,256 96,184.535 153.966,126.36 225.35,126.008 Z m 0,-279.984 C 142.938,106.361 76,173.507 76,256 c 0,82.492 66.938,149.639 149.35,149.992 V 461 h -35.08999 v -30.87 c 0,-4.586 -3.11901,-8.58397 -7.567,-9.7 -14.84101,-3.72101 -28.49901,-9.257 -41.756,-16.926 -3.91999,-2.266 -8.875,-1.617 -12.07899,1.586 l -21.83901,21.847 -51.955,-51.955 21.847,-21.839 c 3.203,-3.202 3.854008,-8.15797 1.586,-12.079 -7.445,-12.872 -13.153,-26.634 -16.965,-40.903 -1.168,-4.376 -5.132,-7.42 -9.661,-7.42 H 21 v -73.48001 h 30.870004 c 4.528999,0 8.493,-3.04401 9.660999,-7.41901 3.811997,-14.27 9.519997,-28.032 16.964997,-40.903 2.268,-3.921 1.617,-8.877 -1.586,-12.08 l -21.846995,-21.839 51.955005,-51.95601 21.839,21.846 c 3.20301,3.20401 8.15801,3.85401 12.07899,1.586 13.25701,-7.668 26.916,-13.205 41.756,-16.926 4.448,-1.116 7.567,-5.114 7.567,-9.7 V 51 h 35.09 c 0.001,12.867 0.001,42.093 0.001,55.008 z M 411,401 H 245.35 V 101 H 411 Z" fill="#a6a6a6" id="path13" style="display:inline" sodipodi:nodetypes="ssccsssssccsssccssssscccssssccccccccssssccccccccsssscccsssssccsssccsssssccssscscccscccsccccccccsccscsccccccscccccccc" inkscape:label="Path" /> </g> <g clip-path="url(#clip_4)" id="g22" style="display:inline" inkscape:label="Front Text" transform="translate(-30.722658,-38.466011)"> <path id="path18" style="color:#000000;display:inline;fill:#ffffff;-inkscape-stroke:none" inkscape:label="Border" d="m -308.04074,16.888868 v 64.317021 c 0,10.412449 2.01855,20.136531 6.63331,28.529611 4.46538,8.12143 11.16893,14.79794 19.32215,19.04679 l 0.0221,0.01 0.0246,0.0148 c 7.99689,4.12471 17.04581,6.06045 26.49881,6.06045 9.453,0 18.55327,-1.93832 26.71271,-5.94982 l 0.0148,-0.007 0.0147,-0.007 c 5.23018,-2.58885 9.916,-6.11733 13.86406,-10.36546 v 15.42035 h 46.02256 8.46005 26.6119 8.49939 32.846919 13.015837 92.042673 7.378263 47.106809 V 65.463462 H 91.253386 V 16.888868 H -11.385859 v 5.863765 c -0.330429,-0.175596 -0.631208,-0.397942 -0.966231,-0.565478 -7.408204,-3.715457 -15.798225,-5.298287 -24.718781,-5.298287 h -42.405963 -13.015837 -43.962259 l -10.58428,29.633527 -10.87685,-29.633527 h -43.46071 -13.55672 -38.71561 -2.11931 z M 10.109695,65.463462 h 2.456144 V 120.95656 L -4.405889,91.055048 c 2.7814382,-2.198587 5.34239527,-4.658767 7.4126842,-7.550366 l 0.00246,-0.0049 C 6.8178425,78.185277 9.2111815,71.947345 10.109695,65.463462 Z" transform="matrix(0.7944048,0,0,0.7944048,275.4317,126.13223)" /> <path id="text22" style="font-weight:800;font-size:128.75px;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold';display:inline" transform="matrix(0.7944048,0,0,0.7944048,275.4317,126.13223)" d="m 75.8575,30.23125 v 20.085 H 51.6525 V 121 H 26.4175 V 50.31625 H 2.47 v -20.085 z M -32.807533,121 l -18.025,-33.475 h -2.70375 V 121 h -25.235 V 30.23125 h 39.78375 q 10.94375,0 18.54,3.8625 7.59625,3.73375 11.4587503,10.42875 3.8625,6.56625 3.8625,14.80625 0,9.27 -5.1500003,16.35125 -5.02125,6.9525 -14.80625,9.91375 L -4.6112827,121 Z m -20.72875,-50.7275 h 12.48875 q 5.15,0 7.725,-2.44625 2.575,-2.44625 2.575,-7.08125 0,-4.3775 -2.70375,-6.82375 -2.575,-2.575 -7.59625,-2.575 h -12.48875 z M -95.251362,30.23125 V 121 H -120.48636 V 70.91625 L -137.61011,121 h -21.115 l -17.2525,-50.47 V 121 h -25.235 V 30.23125 h 30.51375 l 22.78875,58.9675 22.27375,-58.9675 z m -173.812568,0 V 82.89 q 0,7.33875 3.3475,11.33 3.47625,3.99125 10.42875,3.99125 6.9525,0 10.42875,-3.99125 3.605,-4.12 3.605,-11.33 V 30.23125 h 25.235 V 82.89 q 0,12.48875 -5.27875,21.3725 -5.27875,8.755 -14.42,13.26125 -9.0125,4.3775 -20.085,4.3775 -11.0725,0 -19.8275,-4.3775 -8.62625,-4.50625 -13.6475,-13.26125 -4.8925,-8.755 -4.8925,-21.3725 V 30.23125 Z" inkscape:label="Text" /> <g id="g6" inkscape:label="Backup Text"> <text xml:space="preserve" transform="matrix(0.7944048,0,0,0.7944048,36.09725,126.13223)" font-size="128.75px" font-family="Poppins" id="text1" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold';display:none"><tspan y="121" x="0.28125" id="tspan1" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold'">U</tspan></text> <text xml:space="preserve" transform="matrix(0.7944048,0,0,0.7944048,109.63635,126.13223)" font-size="128.75px" font-family="Poppins" id="text2" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold';display:none"><tspan y="121" x="0.28125" id="tspan2" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold'">M</tspan></text> <text xml:space="preserve" transform="matrix(0.7944048,0,0,0.7944048,206.90433,126.13223)" font-size="128.75px" font-family="Poppins" id="text3" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold';display:none"><tspan y="121" x="0.28125" id="tspan3" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold'">R</tspan></text> <text xml:space="preserve" transform="matrix(0.7944048,0,0,0.7944048,275.4317,126.13223)" font-size="128.75px" font-family="Poppins" id="text4" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold';display:none"><tspan y="121" x="0.28125" id="tspan4" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold'">T</tspan></text> </g> </g> </svg>
                <p>SmartRobot</p>
            </div>
            <div id="content">
                <div id="sidebar">
                    <input type="checkbox" id="nav-toggle-cb">
                    <nav id="menu">

                      <div class="input-group" id="custom-group">
                        <label for="set-speed">Speed (0-255)</label>
                        <div class="text">
                            <input id="speed" type="number" step="1" min="0" max="255" value="60">
                        </div>
                      </div>

                        <section id="xclk-section" class="nothidden">
                            <div class="input-group" id="set-xclk-group">
                                <label for="set-xclk">XCLK MHz</label>
                                <div class="text">
                                    <input id="xclk" type="text" minlength="1" maxlength="2" size="2" value="20">
                                </div>
                                <button class="inline-button" id="set-xclk">Set</button>
                            </div>
                        </section>

                        <div class="input-group" id="framesize-group">
                            <label for="framesize">Resolution</label>
                            <select id="framesize" class="default-action">
                                <!-- 3MP -->
                                <option value="17">QXGA(2048x1564)</option>
                                <option value="16">P 3MP(864x1564)</option>
                                <option value="15">P HD(720x1280)</option>
                                <option value="14">FHD(1920x1080)</option>
                                <!-- 2MP -->
                                <option value="13">UXGA(1600x1200)</option>
                                <option value="12">SXGA(1280x1024)</option>
                                <option value="11">HD(1280x720)</option>
                                <option value="10">XGA(1024x768)</option>
                                <option value="9">SVGA(800x600)</option>
                                <option value="8">VGA(640x480)</option>
                                <option value="7">HVGA(480x320)</option>
                                <option value="6">CIF(400x296)</option>
                                <option value="5">QVGA(320x240)</option>
                                <option value="4">240x240</option>
                                <option value="3">HQVGA(240x176)</option>
                                <option value="2">QCIF(176x144)</option>
                                <option value="1">QQVGA(160x120)</option>
                                <option value="0">96x96</option>
                            </select>
                        </div>
                        <div class="input-group" id="quality-group">
                            <label for="quality">Quality</label>
                            <div class="range-min">4</div>
                            <input type="range" id="quality" min="4" max="63" value="10" class="default-action">
                            <div class="range-max">63</div>
                        </div>
                        <div class="input-group" id="brightness-group">
                            <label for="brightness">Brightness</label>
                            <div class="range-min">-3</div>
                            <input type="range" id="brightness" min="-3" max="3" value="0" class="default-action">
                            <div class="range-max">3</div>
                        </div>
                        <div class="input-group" id="contrast-group">
                            <label for="contrast">Contrast</label>
                            <div class="range-min">-3</div>
                            <input type="range" id="contrast" min="-3" max="3" value="0" class="default-action">
                            <div class="range-max">3</div>
                        </div>
                        <div class="input-group" id="saturation-group">
                            <label for="saturation">Saturation</label>
                            <div class="range-min">-4</div>
                            <input type="range" id="saturation" min="-4" max="4" value="0" class="default-action">
                            <div class="range-max">4</div>
                        </div>
                        <div class="input-group" id="sharpness-group">
                            <label for="sharpness">Sharpness</label>
                            <div class="range-min">-3</div>
                            <input type="range" id="sharpness" min="-3" max="3" value="0" class="default-action">
                            <div class="range-max">3</div>
                        </div>
                        <div class="input-group" id="denoise-group">
                            <label for="denoise">De-Noise</label>
                            <div class="range-min">Auto</div>
                            <input type="range" id="denoise" min="0" max="8" value="0" class="default-action">
                            <div class="range-max">8</div>
                        </div>
                        <div class="input-group" id="ae_level-group">
                            <label for="ae_level">Exposure Level</label>
                            <div class="range-min">-5</div>
                            <input type="range" id="ae_level" min="-5" max="5" value="0" class="default-action">
                            <div class="range-max">5</div>
                        </div>
                        <div class="input-group" id="gainceiling-group">
                            <label for="gainceiling">Gainceiling</label>
                            <div class="range-min">0</div>
                            <input type="range" id="gainceiling" min="0" max="511" value="0" class="default-action">
                            <div class="range-max">511</div>
                        </div>
                        <div class="input-group" id="special_effect-group">
                            <label for="special_effect">Special Effect</label>
                            <select id="special_effect" class="default-action">
                                <option value="0" selected="selected">No Effect</option>
                                <option value="1">Negative</option>
                                <option value="2">Grayscale</option>
                                <option value="3">Red Tint</option>
                                <option value="4">Green Tint</option>
                                <option value="5">Blue Tint</option>
                                <option value="6">Sepia</option>
                            </select>
                        </div>
                        <div class="input-group" id="awb-group">
                            <label for="awb">AWB Enable</label>
                            <div class="switch">
                                <input id="awb" type="checkbox" class="default-action" checked="checked">
                                <label class="slider" for="awb"></label>
                            </div>
                        </div>
                        <div class="input-group" id="dcw-group">
                            <label for="dcw">Advanced AWB</label>
                            <div class="switch">
                                <input id="dcw" type="checkbox" class="default-action" checked="checked">
                                <label class="slider" for="dcw"></label>
                            </div>
                        </div>
                        <div class="input-group" id="awb_gain-group">
                            <label for="awb_gain">Manual AWB</label>
                            <div class="switch">
                                <input id="awb_gain" type="checkbox" class="default-action" checked="checked">
                                <label class="slider" for="awb_gain"></label>
                            </div>
                        </div>
                        <div class="input-group" id="wb_mode-group">
                            <label for="wb_mode">AWB Mode</label>
                            <select id="wb_mode" class="default-action">
                                <option value="0" selected="selected">Auto</option>
                                <option value="1">Sunny</option>
                                <option value="2">Cloudy</option>
                                <option value="3">Office</option>
                                <option value="4">Home</option>
                            </select>
                        </div>
                        <div class="input-group" id="aec-group">
                            <label for="aec">AEC Enable</label>
                            <div class="switch">
                                <input id="aec" type="checkbox" class="default-action" checked="checked">
                                <label class="slider" for="aec"></label>
                            </div>
                        </div>
                        <div class="input-group" id="aec_value-group">
                            <label for="aec_value">Manual Exposure</label>
                            <div class="range-min">0</div>
                            <input type="range" id="aec_value" min="0" max="1536" value="320" class="default-action">
                            <div class="range-max">1536</div>
                        </div>
                        <div class="input-group" id="aec2-group">
                            <label for="aec2">Night Mode</label>
                            <div class="switch">
                                <input id="aec2" type="checkbox" class="default-action" checked="checked">
                                <label class="slider" for="aec2"></label>
                            </div>
                        </div>
                        <div class="input-group" id="agc-group">
                            <label for="agc">AGC</label>
                            <div class="switch">
                                <input id="agc" type="checkbox" class="default-action" checked="checked">
                                <label class="slider" for="agc"></label>
                            </div>
                        </div>
                        <div class="input-group hidden" id="agc_gain-group">
                            <label for="agc_gain">Gain</label>
                            <div class="range-min">1x</div>
                            <input type="range" id="agc_gain" min="0" max="64" value="5" class="default-action">
                            <div class="range-max">64x</div>
                        </div>
                        <div class="input-group" id="raw_gma-group">
                            <label for="raw_gma">GMA Enable</label>
                            <div class="switch">
                                <input id="raw_gma" type="checkbox" class="default-action" checked="checked">
                                <label class="slider" for="raw_gma"></label>
                            </div>
                        </div>
                        <div class="input-group" id="lenc-group">
                            <label for="lenc">Lens Correction</label>
                            <div class="switch">
                                <input id="lenc" type="checkbox" class="default-action" checked="checked">
                                <label class="slider" for="lenc"></label>
                            </div>
                        </div>
                        <div class="input-group" id="hmirror-group">
                            <label for="hmirror">H-Mirror</label>
                            <div class="switch">
                                <input id="hmirror" type="checkbox" class="default-action" checked="checked">
                                <label class="slider" for="hmirror"></label>
                            </div>
                        </div>
                        <div class="input-group" id="vflip-group">
                            <label for="vflip">V-Flip</label>
                            <div class="switch">
                                <input id="vflip" type="checkbox" class="default-action" checked="checked">
                                <label class="slider" for="vflip"></label>
                            </div>
                        </div>
                        <div class="input-group" id="bpc-group">
                            <label for="bpc">BPC</label>
                            <div class="switch">
                                <input id="bpc" type="checkbox" class="default-action">
                                <label class="slider" for="bpc"></label>
                            </div>
                        </div>
                        <div class="input-group" id="wpc-group">
                            <label for="wpc">WPC</label>
                            <div class="switch">
                                <input id="wpc" type="checkbox" class="default-action" checked="checked">
                                <label class="slider" for="wpc"></label>
                            </div>
                        </div>
                        <div class="input-group" id="colorbar-group">
                            <label for="colorbar">Color Bar</label>
                            <div class="switch">
                                <input id="colorbar" type="checkbox" class="default-action">
                                <label class="slider" for="colorbar"></label>
                            </div>
                        </div>
                        <div class="input-group" id="led-group">
                            <label for="led_intensity">LED Intensity</label>
                            <div class="range-min">0</div>
                            <input type="range" id="led_intensity" min="0" max="255" value="0" class="default-action">
                            <div class="range-max">255</div>
                        </div>
                        <div class="input-group" id="face_detect-group">
                            <label for="face_detect">Face Detection</label>
                            <div class="switch">
                                <input id="face_detect" type="checkbox" class="default-action">
                                <label class="slider" for="face_detect"></label>
                            </div>
                        </div>
                        <div class="input-group" id="face_recognize-group">
                            <label for="face_recognize">Face Recognition</label>
                            <div class="switch">
                                <input id="face_recognize" type="checkbox" class="default-action">
                                <label class="slider" for="face_recognize"></label>
                            </div>
                        </div>
                        <section id="buttons">
                            <button id="get-still">Get Still</button>
                            <button id="toggle-stream">Start Stream</button>
                            <button id="face_enroll" class="disabled" disabled="disabled">Enroll Face</button>
                        </section>


                        <div style="margin-top: 8px;"><center><span style="font-weight: bold;">Advanced Settings</span></center></div>
                        <hr style="width:100%">
                        <label for="nav-toggle-reg" class="toggle-section-label">&#9776;&nbsp;&nbsp;Register Get/Set</label><input type="checkbox" id="nav-toggle-reg" class="hidden toggle-section-button" checked="checked">
                        <section class="toggle-section">
                            <!--h4>Set Register</h4-->
                            <div class="input-group" id="set-reg-group">
                                <label for="set-reg">Reg, Mask, Value</label>
                                <div class="text">
                                    <input id="reg-addr" type="text" minlength="4" maxlength="6" size="6" value="0x3008">
                                </div>
                                <div class="text">
                                    <input id="reg-mask" type="text" minlength="4" maxlength="4" size="4" value="0xff">
                                </div>
                                <div class="text">
                                    <input id="reg-value" type="text" minlength="4" maxlength="4" size="4" value="0x02">
                                </div>
                                <button class="inline-button" id="set-reg">Set</button>
                            </div>
                            <hr style="width:50%">
                            <!--h4>Get Register</h4-->
                            <div class="input-group" id="get-reg-group">
                                <label for="get-reg">Reg, Mask</label>
                                <div class="text">
                                    <input id="get-reg-addr" type="text" minlength="4" maxlength="6" size="6" value="0x3008">
                                </div>
                                <div class="text">
                                    <input id="get-reg-mask" type="text" minlength="4" maxlength="6" size="6" value="0x00ff">
                                </div>
                                <button class="inline-button" id="get-reg">Get</button>
                            </div>
                            <div class="input-group">
                                <label for="get-reg-value">Value</label>
                                <div class="text">
                                    <span id="get-reg-value">0x1234</span>
                                </div>
                            </div>
                        </section>
                        <hr style="width:100%">
                        <label for="nav-toggle-pll" class="toggle-section-label">&#9776;&nbsp;&nbsp;PLL</label><input type="checkbox" id="nav-toggle-pll" class="hidden toggle-section-button" checked="checked">
                        <section class="toggle-section">
                            <div class="input-group" id="bypass-pll-group">
                                <label for="bypass-pll">Bypass PLL</label>
                                <div class="switch">
                                    <input id="bypass-pll" type="checkbox">
                                    <label class="slider" for="bypass-pll"></label>
                                </div>
                            </div>
                            <div class="input-group" id="set-mul-pll-group">
                                <label for="mul-pll">Multiplier (0 - 31)</label>
                                <div class="text">
                                    <input id="mul-pll" type="text" minlength="1" maxlength="2" size="18" value="30">
                                </div>
                            </div>
                            <div class="input-group" id="root-pll-group">
                                <label for="root-pll">Root Multiplier</label>
                                <select id="root-pll">
                                    <option value="0" selected="selected">1x</option>
                                    <option value="1">2x</option>
                                </select>
                            </div>
                            <div class="input-group" id="set-sys-pll-group">
                                <label for="sys-pll">System Div (0 - 15)</label>
                                <div class="text">
                                    <input id="sys-pll" type="text" minlength="1" maxlength="2" size="18" value="1">
                                </div>
                            </div>
                            <div class="input-group" id="set-pre-pll-group">
                                <label for="pre-pll">Pre Div</label>
                                <select id="pre-pll">
                                    <option value="0">1x</option>
                                    <option value="1">1.5x</option>
                                    <option value="2">2x</option>
                                    <option value="3" selected="selected">3x</option>
                                </select>
                            </div>
                            <div class="input-group" id="set-seld5-pll-group">
                                <label for="seld5-pll">Seld5 Div</label>
                                <select id="seld5-pll">
                                    <option value="0" selected="selected">1x</option>
                                    <option value="1">1x</option>
                                    <option value="2">2x</option>
                                    <option value="3">2.5x</option>
                                </select>
                            </div>
                            <div class="input-group" id="pclk-en-group">
                                <label for="pclk-en">PCLK Manual</label>
                                <div class="switch">
                                    <input id="pclk-en" type="checkbox" checked="checked">
                                    <label class="slider" for="pclk-en"></label>
                                </div>
                            </div>
                            <div class="input-group" id="set-pclk-pll-group">
                                <label for="pclk-pll">PCLK Div (0 - 31)</label>
                                <div class="text">
                                    <input id="pclk-pll" type="text" minlength="1" maxlength="2" size="18" value="10">
                                </div>
                            </div>
                            <button id="set-pll">Set PLL</button>
                        </section>
                        <hr style="width:100%">
                        <label for="nav-toggle-win" class="toggle-section-label">&#9776;&nbsp;&nbsp;Window</label><input type="checkbox" id="nav-toggle-win" class="hidden toggle-section-button" checked="checked">
                        <section class="toggle-section">
                            <div class="input-group" id="set-start-res-group">
                                <label for="start-x">Adress Start</label>
                                <div class="text">
                                    X:<input id="start-x" type="text" minlength="1" maxlength="4" size="6" value="0">
                                </div>
                                <div class="text">
                                    Y:<input id="start-y" type="text" minlength="1" maxlength="4" size="6" value="0">
                                </div>
                            </div>
                            <div class="input-group" id="set-end-res-group">
                                <label for="end-x">Adress End</label>
                                <div class="text">
                                    X:<input id="end-x" type="text" minlength="1" maxlength="4" size="6" value="2079">
                                </div>
                                <div class="text">
                                    Y:<input id="end-y" type="text" minlength="1" maxlength="4" size="6" value="1547">
                                </div>
                            </div>
                            <div class="input-group" id="set-offset-res-group">
                                <label for="offset-x">Offset</label>
                                <div class="text">
                                    X:<input id="offset-x" type="text" minlength="1" maxlength="3" size="6" value="16">
                                </div>
                                <div class="text">
                                    Y:<input id="offset-y" type="text" minlength="1" maxlength="3" size="6" value="6">
                                </div>
                            </div>
                            <div class="input-group" id="set-total-res-group">
                                <label for="total-x">Total Size</label>
                                <div class="text">
                                    X:<input id="total-x" type="text" minlength="1" maxlength="4" size="6" value="2300">
                                </div>
                                <div class="text">
                                    Y:<input id="total-y" type="text" minlength="1" maxlength="4" size="6" value="1564">
                                </div>
                            </div>
                            <div class="input-group" id="set-output-res-group">
                                <label for="output-x">Output Size</label>
                                <div class="text">
                                    X:<input id="output-x" type="text" minlength="1" maxlength="4" size="6" value="2048">
                                </div>
                                <div class="text">
                                    Y:<input id="output-y" type="text" minlength="1" maxlength="4" size="6" value="1536">
                                </div>
                            </div>
                            <div class="input-group" id="scaling-group">
                                <label for="scaling">Scaling</label>
                                <div class="switch">
                                    <input id="scaling" type="checkbox">
                                    <label class="slider" for="scaling"></label>
                                </div>
                            </div>
                            <div class="input-group" id="binning-group">
                                <label for="binning">Binning</label>
                                <div class="switch">
                                    <input id="binning" type="checkbox">
                                    <label class="slider" for="binning"></label>
                                </div>
                            </div>
                            <button id="set-resolution">Set Resolution</button>
                        </section>
                        <hr style="width:100%">
                        <label for="nav-toggle-gamma" class="toggle-section-label">&#9776;&nbsp;&nbsp;Gamma</label><input type="checkbox" id="nav-toggle-gamma" class="hidden toggle-section-button" checked="checked">
                        <section class="toggle-section">
                            <div class="input-group"><label for="gamma-bias">Gamma Bias Plus</label><div class="switch"><input id="gamma-bias" type="checkbox" class="reg-action" reg="0x5480" offset="0" mask="0x01"><label class="slider" for="gamma-bias"></label></div></div>
                            <div class="input-group"><label for="gamma-1">Gamma 0</label><input type="range" id="gamma-1" min="0" max="255" value="0" class="reg-action" reg="0x5481" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-2">Gamma 1</label><input type="range" id="gamma-2" min="0" max="255" value="0" class="reg-action" reg="0x5482" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-3">Gamma 2</label><input type="range" id="gamma-3" min="0" max="255" value="0" class="reg-action" reg="0x5483" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-4">Gamma 3</label><input type="range" id="gamma-4" min="0" max="255" value="0" class="reg-action" reg="0x5484" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-5">Gamma 4</label><input type="range" id="gamma-5" min="0" max="255" value="0" class="reg-action" reg="0x5485" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-6">Gamma 5</label><input type="range" id="gamma-6" min="0" max="255" value="0" class="reg-action" reg="0x5486" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-7">Gamma 6</label><input type="range" id="gamma-7" min="0" max="255" value="0" class="reg-action" reg="0x5487" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-8">Gamma 7</label><input type="range" id="gamma-8" min="0" max="255" value="0" class="reg-action" reg="0x5488" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-9">Gamma 8</label><input type="range" id="gamma-9" min="0" max="255" value="0" class="reg-action" reg="0x5489" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-10">Gamma 9</label><input type="range" id="gamma-10" min="0" max="255" value="0" class="reg-action" reg="0x548a" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-11">Gamma 10</label><input type="range" id="gamma-11" min="0" max="255" value="0" class="reg-action" reg="0x548b" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-12">Gamma 11</label><input type="range" id="gamma-12" min="0" max="255" value="0" class="reg-action" reg="0x548c" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-13">Gamma 12</label><input type="range" id="gamma-13" min="0" max="255" value="0" class="reg-action" reg="0x548d" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-14">Gamma 13</label><input type="range" id="gamma-14" min="0" max="255" value="0" class="reg-action" reg="0x548e" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-15">Gamma 14</label><input type="range" id="gamma-15" min="0" max="255" value="0" class="reg-action" reg="0x548f" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="gamma-16">Gamma 15</label><input type="range" id="gamma-16" min="0" max="255" value="0" class="reg-action" reg="0x5490" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="get-gamma"></label><button class="inline-button" id="get-gamma">Get Gamma Config</button></div>
                        </section>
                        <hr style="width:100%">
                        <label for="nav-toggle-sde" class="toggle-section-label">&#9776;&nbsp;&nbsp;SDE</label><input type="checkbox" id="nav-toggle-sde" class="hidden toggle-section-button" checked="checked">
                        <section class="toggle-section">
                            <div class="input-group"><label for="sde2">Negative</label><div class="switch"><input id="sde2" type="checkbox" class="reg-action" reg="0x5580" offset="6" mask="0x01"><label class="slider" for="sde2"></label></div></div>
                            <div class="input-group"><label for="sde3">Gray</label><div class="switch"><input id="sde3" type="checkbox" class="reg-action" reg="0x5580" offset="5" mask="0x01"><label class="slider" for="sde3"></label></div></div>
                            <hr style="width:50%">
                            <div class="input-group"><label for="sde1">Fixed Y</label><div class="switch"><input id="sde1" type="checkbox" class="reg-action" reg="0x5580" offset="7" mask="0x01"><label class="slider" for="sde1"></label></div></div>
                            <div class="input-group"><label for="sde5">Fixed U</label><div class="switch"><input id="sde5" type="checkbox" class="reg-action" reg="0x5580" offset="3" mask="0x01"><label class="slider" for="sde5"></label></div></div>
                            <div class="input-group"><label for="sde4">Fixed V</label><div class="switch"><input id="sde4" type="checkbox" class="reg-action" reg="0x5580" offset="4" mask="0x01"><label class="slider" for="sde4"></label></div></div>
                            <div class="input-group"><label for="sde22">UV Thresh 1</label><input type="range" id="sde22" min="0" max="255" value="0" class="reg-action" reg="0x5589" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="sde23">UV Thresh 2</label><input type="range" id="sde23" min="0" max="511" value="0" class="reg-action" reg="0x558a" offset="0" mask="0x1ff"></div>
                            <hr style="width:50%">
                            <div class="input-group"><label for="sde8">Hue</label><div class="switch"><input id="sde8" type="checkbox" class="reg-action" reg="0x5580" offset="0" mask="0x01"><label class="slider" for="sde8"></label></div></div>
                            <div class="input-group"><label for="sde9">Hue Cos</label><input type="range" id="sde9" min="0" max="255" value="0" class="reg-action" reg="0x5581" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="sde17">Hue U Cos Neg</label><div class="switch"><input id="sde17" type="checkbox" class="reg-action" reg="0x5588" offset="4" mask="0x01"><label class="slider" for="sde17"></label></div></div>
                            <div class="input-group"><label for="sde16">Hue V Cos Neg</label><div class="switch"><input id="sde16" type="checkbox" class="reg-action" reg="0x5588" offset="5" mask="0x01"><label class="slider" for="sde16"></label></div></div>
                            <div class="input-group"><label for="sde10">Hue Sin</label><input type="range" id="sde10" min="0" max="255" value="0" class="reg-action" reg="0x5582" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="sde21">Hue U Sin Neg</label><div class="switch"><input id="sde21" type="checkbox" class="reg-action" reg="0x5588" offset="0" mask="0x01"><label class="slider" for="sde21"></label></div></div>
                            <div class="input-group"><label for="sde20">Hue V Sin Neg</label><div class="switch"><input id="sde20" type="checkbox" class="reg-action" reg="0x5588" offset="1" mask="0x01"><label class="slider" for="sde20"></label></div></div>
                            <hr style="width:50%">
                            <div class="input-group"><label for="sde6">Contrast</label><div class="switch"><input id="sde6" type="checkbox" class="reg-action" reg="0x5580" offset="2" mask="0x01"><label class="slider" for="sde6"></label></div></div>
                            <div class="input-group"><label for="sde13">Contrast Y Offset</label><input type="range" id="sde13" min="0" max="255" value="0" class="reg-action" reg="0x5585" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="sde19">Contrast Y Offset Neg</label><div class="switch"><input id="sde19" type="checkbox" class="reg-action" reg="0x5588" offset="2" mask="0x01"><label class="slider" for="sde19"></label></div></div>
                            <div class="input-group"><label for="sde15">Contrast Y Bright</label><input type="range" id="sde15" min="0" max="255" value="0" class="reg-action" reg="0x5587" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="sde18">Contrast Y Bright Neg</label><div class="switch"><input id="sde18" type="checkbox" class="reg-action" reg="0x5588" offset="3" mask="0x01"><label class="slider" for="sde18"></label></div></div>
                            <div class="input-group"><label for="sde14">Contrast Y Gain</label><input type="range" id="sde14" min="0" max="255" value="0" class="reg-action" reg="0x5586" offset="0" mask="0xff"></div>
                            <hr style="width:50%">
                            <div class="input-group"><label for="sde7">Saturation</label><div class="switch"><input id="sde7" type="checkbox" class="reg-action" reg="0x5580" offset="1" mask="0x01"><label class="slider" for="sde7"></label></div></div>
                            <div class="input-group"><label for="sde11">U Saturation</label><input type="range" id="sde11" min="0" max="255" value="0" class="reg-action" reg="0x5583" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="sde12">V Saturation</label><input type="range" id="sde12" min="0" max="255" value="0" class="reg-action" reg="0x5584" offset="0" mask="0xff"></div>
                        </section>
                        <hr style="width:100%">
                        <label for="nav-toggle-cmx" class="toggle-section-label">&#9776;&nbsp;&nbsp;CMX</label><input type="checkbox" id="nav-toggle-cmx" class="hidden toggle-section-button" checked="checked">
                        <section class="toggle-section">

                            <div class="input-group">
                                <label for="cmx-precision">CMX Precision</label><select id="cmx-precision" class="reg-action" reg="0x5380" offset="1" mask="0x01">
                                    <option value="1">2.6 Mode</option>
                                    <option value="0" selected="selected">1.7 Mode</option>
                                </select>
                            </div>
                            <div class="input-group"><label for="cmx1">CMX1 for Y</label><div class="switch"><input id="cmx1" type="checkbox" class="reg-action" reg="0x5381" offset="1" mask="0x01"><label class="slider" for="cmx1"></label></div></div>
                            <div class="input-group"><label for="cmx11">CMX1 for Y Neg</label><div class="switch"><input id="cmx11" type="checkbox" class="reg-action" reg="0x538b" offset="0" mask="0x01"><label class="slider" for="cmx11"></label></div></div>

                            <div class="input-group"><label for="cmx2">CMX2 for Y</label><input type="range" id="cmx2" min="0" max="255" value="0" class="reg-action" reg="0x5382" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="cmx12">CMX2 for Y Neg</label><div class="switch"><input id="cmx12" type="checkbox" class="reg-action" reg="0x538b" offset="1" mask="0x01"><label class="slider" for="cmx12"></label></div></div>
                            <div class="input-group"><label for="cmx3">CMX3 for Y</label><input type="range" id="cmx3" min="0" max="255" value="0" class="reg-action" reg="0x5383" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="cmx13">CMX3 for Y Neg</label><div class="switch"><input id="cmx13" type="checkbox" class="reg-action" reg="0x538b" offset="2" mask="0x01"><label class="slider" for="cmx13"></label></div></div>
                            <div class="input-group"><label for="cmx4">CMX4 for Y</label><input type="range" id="cmx4" min="0" max="255" value="0" class="reg-action" reg="0x5384" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="cmx14">CMX4 for Y Neg</label><div class="switch"><input id="cmx14" type="checkbox" class="reg-action" reg="0x538b" offset="3" mask="0x01"><label class="slider" for="cmx14"></label></div></div>
                            <div class="input-group"><label for="cmx5">CMX5 for Y</label><input type="range" id="cmx5" min="0" max="255" value="0" class="reg-action" reg="0x5385" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="cmx15">CMX5 for Y Neg</label><div class="switch"><input id="cmx15" type="checkbox" class="reg-action" reg="0x538b" offset="4" mask="0x01"><label class="slider" for="cmx15"></label></div></div>
                            <div class="input-group"><label for="cmx6">CMX6 for Y</label><input type="range" id="cmx6" min="0" max="255" value="0" class="reg-action" reg="0x5386" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="cmx16">CMX6 for Y Neg</label><div class="switch"><input id="cmx16" type="checkbox" class="reg-action" reg="0x538b" offset="5" mask="0x01"><label class="slider" for="cmx16"></label></div></div>
                            <div class="input-group"><label for="cmx7">CMX7 for Y</label><input type="range" id="cmx7" min="0" max="255" value="0" class="reg-action" reg="0x5387" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="cmx17">CMX7 for Y Neg</label><div class="switch"><input id="cmx17" type="checkbox" class="reg-action" reg="0x538b" offset="6" mask="0x01"><label class="slider" for="cmx17"></label></div></div>
                            <div class="input-group"><label for="cmx8">CMX8 for Y</label><input type="range" id="cmx8" min="0" max="255" value="0" class="reg-action" reg="0x5388" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="cmx18">CMX8 for Y Neg</label><div class="switch"><input id="cmx18" type="checkbox" class="reg-action" reg="0x538b" offset="7" mask="0x01"><label class="slider" for="cmx18"></label></div></div>
                            <div class="input-group"><label for="cmx9">CMX9 for Y</label><input type="range" id="cmx9" min="0" max="255" value="0" class="reg-action" reg="0x5389" offset="0" mask="0xff"></div>
                            <div class="input-group"><label for="cmx10">CMX9 for Y Neg</label><div class="switch"><input id="cmx10" type="checkbox" class="reg-action" reg="0x538a" offset="0" mask="0x01"><label class="slider" for="cmx10"></label></div></div>

                        </section>
                        <hr style="width:100%">
                        <label for="nav-toggle-awbg" class="toggle-section-label">&#9776;&nbsp;&nbsp;AWB Gain</label><input type="checkbox" id="nav-toggle-awbg" class="hidden toggle-section-button" checked="checked">
                        <section class="toggle-section">

                            <div class="input-group"><label for="awbg1">Manual AWB Gain</label><div class="switch"><input id="awbg1" type="checkbox" class="reg-action" reg="0x3406" offset="0" mask="0x01"><label class="slider" for="awbg1"></label></div></div>
                            <div class="input-group"><label for="awbg2">AWB R Gain</label><input type="range" id="awbg2" min="0" max="4095" value="0" class="reg-action" reg="0x3400" offset="0" mask="0xfff"></div>
                            <div class="input-group"><label for="awbg3">AWB G Gain</label><input type="range" id="awbg3" min="0" max="4095" value="0" class="reg-action" reg="0x3402" offset="0" mask="0xfff"></div>
                            <div class="input-group"><label for="awbg4">AWB B Gain</label><input type="range" id="awbg4" min="0" max="4095" value="0" class="reg-action" reg="0x3404" offset="0" mask="0xfff"></div>

                        </section>
                        <hr style="width:100%">
                        <label for="nav-toggle-aecagc" class="toggle-section-label">&#9776;&nbsp;&nbsp;AEC/AGC Control</label><input type="checkbox" id="nav-toggle-aecagc" class="hidden toggle-section-button" checked="checked">
                        <section class="toggle-section">

                            <div class="input-group"><label for="aecagc1">Manual AGC</label><div class="switch"><input id="aecagc1" type="checkbox" class="reg-action" reg="0x3503" offset="1" mask="0x01"><label class="slider" for="aecagc1"></label></div></div>
                            <div class="input-group"><label for="aecagc2">Manual AEC</label><div class="switch"><input id="aecagc2" type="checkbox" class="reg-action" reg="0x3503" offset="0" mask="0x01"><label class="slider" for="aecagc2"></label></div></div>
                            <div class="input-group"><label for="aecagc3">AEC PK Exposure</label><input type="range" id="aecagc3" min="0" max="65535" value="0" class="reg-action" reg="0x3500" offset="0" mask="0xffff0"></div>
                            <div class="input-group"><label for="aecagc4">AEC PK Real Gain</label><input type="range" id="aecagc4" min="0" max="1023" value="0" class="reg-action" reg="0x350a" offset="0" mask="0x3ff"></div>
                            <div class="input-group"><label for="aecagc5">AEC PK VTS</label><input type="range" id="aecagc5" min="0" max="65535" value="0" class="reg-action" reg="0x350c" offset="0" mask="0xffff"></div>

                        </section>
                        
                    </nav>
                </div>
                <figure>

                  <!-- <?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg version="1.1" width="80" viewBox="0 0 317.20117 297.75" id="svg22" sodipodi:docname="UMRT LOGO Large.svg" inkscape:version="1.3.2 (091e20e, 2023-11-25, custom)" inkscape:export-filename="UMRT LOGO.png" inkscape:export-xdpi="4096" inkscape:export-ydpi="4096" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <sodipodi:namedview id="namedview22" pagecolor="#3f3f3f" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="true" inkscape:deskcolor="#d1d1d1" inkscape:zoom="1.4142136" inkscape:cx="193.3937" inkscape:cy="70.357123" inkscape:window-width="1920" inkscape:window-height="991" inkscape:window-x="-9" inkscape:window-y="-9" inkscape:window-maximized="1" inkscape:current-layer="svg22" shape-rendering="crispEdges" inkscape:document-units="in" /> <defs id="defs5"> <clipPath id="clip_0"> <path transform="scale(0.24)" d="M 0,0 H 1562.5 V 1562.5 H 0 Z" fill-rule="evenodd" id="path1" /> </clipPath> <clipPath id="clip_1"> <path transform="scale(0.24)" d="M 0,0 H 1562.5 V 1562.5 H 0 Z" fill-rule="evenodd" id="path2" /> </clipPath> <clipPath id="clip_2"> <path transform="scale(0.24)" d="M 160.27504,160.27504 H 1400.9 V 1400.9 H 160.27504 Z" fill-rule="evenodd" id="path3" /> </clipPath> <clipPath id="clip_3"> <path transform="scale(0.24)" d="M 1255.396,525.55099 H 1562.5 v 468.75 h -307.104 z" fill-rule="evenodd" id="path4" /> </clipPath> <clipPath id="clip_4"> <path transform="scale(0.24)" d="M 0,0 H 1562.5 V 1562.5 H 0 Z" fill-rule="evenodd" id="path5" /> </clipPath> </defs> <path d="M -30.722658,-38.466011 H 344.27734 V 336.53399 H -30.722658 Z" id="path7" style="display:none;stroke-width:0.75" inkscape:label="Background" /> <g clip-path="url(#clip_2)" id="g13" style="display:inline" inkscape:label="Back Logo" transform="translate(-30.722658,-38.466011)"> <path transform="matrix(0.5844439,0,0,0.5844439,37.881567,37.881567)" d="M 180.26,41 V 81.869998 C 163.90999,85.96999 149.37999,92.06 135.93,99.84 l -28.91001,-28.92 -66.1,66.09999 28.92,28.91001 c -7.78,13.44999 -13.87,27.97999 -17.970001,43.33 H 11 v 93.48 h 40.87 c 4.099999,15.35 10.189999,29.88 17.97,43.33 l -28.92,28.91 66.1,66.10003 28.91,-28.92003 c 13.44999,7.78 27.97999,13.87 44.33,17.97 V 471 h 55.08999 v -60 l 8.65,-7.667 -8.65,-7.653 L 166.667,256 235.35,116.32001 244,99.333 235.35,91 V 41 Z" fill="#545454" id="path8" style="display:inline" inkscape:label="Fill Left Outer" /> <path transform="matrix(0.5844439,0,0,0.5844439,37.881567,37.881567)" d="M 235.35,116.46 291.333,244.807 235.35,395.82 c -1.75,0.21 -6.21,0.32 -9.35,0.32 -77.32,0 -140,-62.67997 -140,-140 0,-77.32 62.68,-139.99998 140,-139.99998 3.14,-2e-5 7.6,0.10998 9.35,0.31998 z" fill="#d9d9d9" id="path9" style="display:inline" inkscape:label="Fill Left Inner" /> <path transform="matrix(0.5844439,0,0,0.5844439,37.881567,37.881567)" d="m 235.35,91 c 0,13.282 0,308.286 0,320 22.352,0 163.543,0 185.65,0 0,-38.315 0,-282.40701 0,-320 -5.807,0 -181.594,0 -185.65,0 z" fill="#d9d9d9" id="path10" style="display:inline" inkscape:label="Fill Right" /> <path transform="matrix(0.5844439,0,0,0.5844439,37.881567,37.881567)" d="m 431,91 c 0,-5.523 -4.478,-10 -10,-10 H 391 V 41 h 15 c 5.522,0 10,-4.477 10,-10 0,-5.522998 -4.478,-10 -10,-10 h -25 c -5.522,0 -10,4.477002 -10,10 V 81 H 351 V 11 C 351,5.477 346.522,1 341,1 335.478,1 331,5.477 331,11 V 81 H 311 V 31 c 0,-5.522998 -4.478,-10 -10,-10 h -25 c -5.522,0 -10,4.477002 -10,10 0,5.523 4.478,10 10,10 h 15 V 81 H 245.35 V 41 c 0,-5.523 -4.47799,-10 -10,-10 h -55.08999 c -5.52201,0 -10,4.477 -10,10 v 33.235 c -11.338,3.352 -22.097,7.717 -32.573,13.217 L 114.092,63.85 c -3.90499,-3.907002 -10.23799,-3.905 -14.143991,-0.001 l -66.1,66.101 c -3.905002,3.906 -3.903001,10.238 9.99e-4,14.143 l 23.603001,23.595 c -5.32,10.12601 -9.704999,20.69701 -13.097,31.573 H 11 c -5.522,0 -10,4.477 -10,10 v 93.48 c 0,5.522 4.478,10 10,10 h 33.355 c 3.391999,10.875 7.776,21.446 13.097,31.573 L 33.85,367.908 c -3.904,3.90399 -3.905002,10.238 -0.001,14.144 l 66.1,66.1 c 3.905,3.90303 10.239,3.904 14.144,-10e-4 l 23.59499,-23.603 c 10.476,5.5 21.235,9.866 32.573,13.217 V 471 c 0,5.522 4.478,10 10,10 h 55.09 c 5.522,0 10,-4.478 10,-10 V 421 H 291 v 40 h -15 c -5.522,0 -10,4.478 -10,10 0,5.522 4.478,10 10,10 h 25 c 5.522,0 10,-4.478 10,-10 v -50 h 20 v 80 c 0,5.522 4.478,10 10,10 5.522,0 10,-4.478 10,-10 v -80 h 20 v 50 c 0,5.522 4.478,10 10,10 h 25 c 5.522,0 10,-4.478 10,-10 0,-5.522 -4.478,-10 -10,-10 h -15 v -40 h 30 c 5.522,0 10,-4.478 10,-10 z M 225.35,385.992 C 153.966,385.64 96,327.465 96,256 96,184.535 153.966,126.36 225.35,126.008 Z m 0,-279.984 C 142.938,106.361 76,173.507 76,256 c 0,82.492 66.938,149.639 149.35,149.992 V 461 h -35.08999 v -30.87 c 0,-4.586 -3.11901,-8.58397 -7.567,-9.7 -14.84101,-3.72101 -28.49901,-9.257 -41.756,-16.926 -3.91999,-2.266 -8.875,-1.617 -12.07899,1.586 l -21.83901,21.847 -51.955,-51.955 21.847,-21.839 c 3.203,-3.202 3.854008,-8.15797 1.586,-12.079 -7.445,-12.872 -13.153,-26.634 -16.965,-40.903 -1.168,-4.376 -5.132,-7.42 -9.661,-7.42 H 21 v -73.48001 h 30.870004 c 4.528999,0 8.493,-3.04401 9.660999,-7.41901 3.811997,-14.27 9.519997,-28.032 16.964997,-40.903 2.268,-3.921 1.617,-8.877 -1.586,-12.08 l -21.846995,-21.839 51.955005,-51.95601 21.839,21.846 c 3.20301,3.20401 8.15801,3.85401 12.07899,1.586 13.25701,-7.668 26.916,-13.205 41.756,-16.926 4.448,-1.116 7.567,-5.114 7.567,-9.7 V 51 h 35.09 c 0.001,12.867 0.001,42.093 0.001,55.008 z M 411,401 H 245.35 V 101 H 411 Z" fill="#a6a6a6" id="path13" style="display:inline" sodipodi:nodetypes="ssccsssssccsssccssssscccssssccccccccssssccccccccsssscccsssssccsssccsssssccssscscccscccsccccccccsccscsccccccscccccccc" inkscape:label="Path" /> </g> <g clip-path="url(#clip_4)" id="g22" style="display:inline" inkscape:label="Front Text" transform="translate(-30.722658,-38.466011)"> <path id="path18" style="color:#000000;display:inline;fill:#ffffff;-inkscape-stroke:none" inkscape:label="Border" d="m -308.04074,16.888868 v 64.317021 c 0,10.412449 2.01855,20.136531 6.63331,28.529611 4.46538,8.12143 11.16893,14.79794 19.32215,19.04679 l 0.0221,0.01 0.0246,0.0148 c 7.99689,4.12471 17.04581,6.06045 26.49881,6.06045 9.453,0 18.55327,-1.93832 26.71271,-5.94982 l 0.0148,-0.007 0.0147,-0.007 c 5.23018,-2.58885 9.916,-6.11733 13.86406,-10.36546 v 15.42035 h 46.02256 8.46005 26.6119 8.49939 32.846919 13.015837 92.042673 7.378263 47.106809 V 65.463462 H 91.253386 V 16.888868 H -11.385859 v 5.863765 c -0.330429,-0.175596 -0.631208,-0.397942 -0.966231,-0.565478 -7.408204,-3.715457 -15.798225,-5.298287 -24.718781,-5.298287 h -42.405963 -13.015837 -43.962259 l -10.58428,29.633527 -10.87685,-29.633527 h -43.46071 -13.55672 -38.71561 -2.11931 z M 10.109695,65.463462 h 2.456144 V 120.95656 L -4.405889,91.055048 c 2.7814382,-2.198587 5.34239527,-4.658767 7.4126842,-7.550366 l 0.00246,-0.0049 C 6.8178425,78.185277 9.2111815,71.947345 10.109695,65.463462 Z" transform="matrix(0.7944048,0,0,0.7944048,275.4317,126.13223)" /> <path id="text22" style="font-weight:800;font-size:128.75px;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold';display:inline" transform="matrix(0.7944048,0,0,0.7944048,275.4317,126.13223)" d="m 75.8575,30.23125 v 20.085 H 51.6525 V 121 H 26.4175 V 50.31625 H 2.47 v -20.085 z M -32.807533,121 l -18.025,-33.475 h -2.70375 V 121 h -25.235 V 30.23125 h 39.78375 q 10.94375,0 18.54,3.8625 7.59625,3.73375 11.4587503,10.42875 3.8625,6.56625 3.8625,14.80625 0,9.27 -5.1500003,16.35125 -5.02125,6.9525 -14.80625,9.91375 L -4.6112827,121 Z m -20.72875,-50.7275 h 12.48875 q 5.15,0 7.725,-2.44625 2.575,-2.44625 2.575,-7.08125 0,-4.3775 -2.70375,-6.82375 -2.575,-2.575 -7.59625,-2.575 h -12.48875 z M -95.251362,30.23125 V 121 H -120.48636 V 70.91625 L -137.61011,121 h -21.115 l -17.2525,-50.47 V 121 h -25.235 V 30.23125 h 30.51375 l 22.78875,58.9675 22.27375,-58.9675 z m -173.812568,0 V 82.89 q 0,7.33875 3.3475,11.33 3.47625,3.99125 10.42875,3.99125 6.9525,0 10.42875,-3.99125 3.605,-4.12 3.605,-11.33 V 30.23125 h 25.235 V 82.89 q 0,12.48875 -5.27875,21.3725 -5.27875,8.755 -14.42,13.26125 -9.0125,4.3775 -20.085,4.3775 -11.0725,0 -19.8275,-4.3775 -8.62625,-4.50625 -13.6475,-13.26125 -4.8925,-8.755 -4.8925,-21.3725 V 30.23125 Z" inkscape:label="Text" /> <g id="g6" inkscape:label="Backup Text"> <text xml:space="preserve" transform="matrix(0.7944048,0,0,0.7944048,36.09725,126.13223)" font-size="128.75px" font-family="Poppins" id="text1" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold';display:none"><tspan y="121" x="0.28125" id="tspan1" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold'">U</tspan></text> <text xml:space="preserve" transform="matrix(0.7944048,0,0,0.7944048,109.63635,126.13223)" font-size="128.75px" font-family="Poppins" id="text2" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold';display:none"><tspan y="121" x="0.28125" id="tspan2" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold'">M</tspan></text> <text xml:space="preserve" transform="matrix(0.7944048,0,0,0.7944048,206.90433,126.13223)" font-size="128.75px" font-family="Poppins" id="text3" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold';display:none"><tspan y="121" x="0.28125" id="tspan3" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold'">R</tspan></text> <text xml:space="preserve" transform="matrix(0.7944048,0,0,0.7944048,275.4317,126.13223)" font-size="128.75px" font-family="Poppins" id="text4" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold';display:none"><tspan y="121" x="0.28125" id="tspan4" style="font-style:normal;font-variant:normal;font-weight:800;font-stretch:normal;font-family:Poppins;-inkscape-font-specification:'Poppins Ultra-Bold'">T</tspan></text> </g> </g> </svg> -->
                    
                    <div id="stream-container" class="image-container hidden">
                        <a id="save-still" href="#" class="button save" download="capture.jpg">Save</a>
                        <div class="close" id="close-stream"></div>
                        <img id="stream" src="" crossorigin>
                    </div>

                    <div id="controls">
                        
                        <!-- <div class="enter-code">Enter Passcode</div>
                        <input type="button" class="enter-code" main="aa"> -->
                        <div class="pwd-group">
                          <h1>Enter Hidden Passcode</h1>
                          <div>
                            <label>Code 1</label>
                            <input class="pwd-input" maxlength="8" id="pwd-1">
                          </div>
                          <div>
                            <label>Code 2</label>
                            <input class="pwd-input" maxlength="8" id="pwd-2">
                          </div>
                          <div>
                            <label>Code 3</label>
                            <input class="pwd-input" maxlength="8" id="pwd-3">
                          </div> 
                          <button type="button" class="enter-code" id="enter-btn">Enter</button>
                        </div>

                        <!-- <h1>Controls</h1> -->
                        <div class="key-group">
                            <div class="row">
                              <!-- up -->
                              <div class="key" data-key="w">&#x25B2;</div>
                            </div>
                            <div class="row">
                              <!-- left -->
                              <div class="key" data-key="a">&#x25C0;</div>
                              <!-- down -->
                              <div class="key" data-key="s">&#x25BC;</div>
                              <!-- right -->
                              <div class="key" data-key="d">&#x25B6;</div>
                            </div>
                            <a>Movement</a>
                        </div>
                        <!-- <div class="key-group">
                          <div class="row">
                            <div class="key" data-key="q">Q</div>
                            <div class="key" data-key="e">E</div>
                          </div>
                          <a>Servo</a>
                        </div>
                        <div class="key-group">
                          <div class="row">
                            <div class="key" data-key="1">1</div>
                            <div class="key" data-key="2">2</div>
                            <div class="key" data-key="3">3</div>
                          </div>
                          <a>Speed</a>
                        </div>
                        <div class="key-group">
                          <div class="row">
                            <div class="key" data-key="z">Z</div>
                            <div class="key" data-key="x">X</div>
                            <div class="key" data-key="c">C</div>
                          </div>
                          <a>Emerg. Stop</a>
                        </div> -->
                          
                    </div>
                </figure>
            </div>
        </section>
        <script>
document.addEventListener('DOMContentLoaded', function (event) {
  var baseHost = document.location.origin
  var streamUrl = baseHost + ':81'

  function fetchUrl(url, cb){
    fetch(url)
      .then(function (response) {
        if (response.status !== 200) {
          cb(response.status, response.statusText);
        } else {
          response.text().then(function(data){
            cb(200, data);
          }).catch(function(err) {
            cb(-1, err);
          });
        }
      })
      .catch(function(err) {
        cb(-1, err);
      });
  }

  function setReg(reg, offset, mask, value, cb){
    console.log('Set Reg', '0x'+reg.toString(16), offset, '0x'+mask.toString(16), '0x'+value.toString(16), '('+value+')');
    value = (value & mask) << offset;
    mask = mask << offset;
    fetchUrl(`${baseHost}/reg?reg=${reg}&mask=${mask}&val=${value}`, cb);
  }

  function getReg(reg, offset, mask, cb){
    mask = mask << offset;
    fetchUrl(`${baseHost}/greg?reg=${reg}&mask=${mask}`, function(code, txt){
      let value = 0;
      if(code == 200){
        value = parseInt(txt);
        value = (value & mask) >> offset;
        txt = ''+value;
      }
      cb(code, txt);
    });
  }

  function setXclk(xclk, cb){
    fetchUrl(`${baseHost}/xclk?xclk=${xclk}`, cb);
  }

  function setPll(bypass, mul, sys, root_, pre, seld5, pclken, pclk, cb){
    fetchUrl(`${baseHost}/pll?bypass=${bypass}&mul=${mul}&sys=${sys}&root=${root_}&pre=${pre}&seld5=${seld5}&pclken=${pclken}&pclk=${pclk}`, cb);
  }

  function setWindow(start_x, start_y, end_x, end_y, offset_x, offset_y, total_x, total_y, output_x, output_y, scaling, binning, cb){
    fetchUrl(`${baseHost}/resolution?sx=${start_x}&sy=${start_y}&ex=${end_x}&ey=${end_y}&offx=${offset_x}&offy=${offset_y}&tx=${total_x}&ty=${total_y}&ox=${output_x}&oy=${output_y}&scale=${scaling}&binning=${binning}`, cb);
  }

  const setRegButton = document.getElementById('set-reg')
  setRegButton.onclick = () => {
    let reg = parseInt(document.getElementById('reg-addr').value);
    let mask = parseInt(document.getElementById('reg-mask').value);
    let value = parseInt(document.getElementById('reg-value').value);

    setReg(reg, 0, mask, value, function(code, txt){
      if(code != 200){
        alert('Error['+code+']: '+txt);
      }
    });
  }

  const getRegButton = document.getElementById('get-reg')
  getRegButton.onclick = () => {
    let reg = parseInt(document.getElementById('get-reg-addr').value);
    let mask = parseInt(document.getElementById('get-reg-mask').value);
    let value = document.getElementById('get-reg-value');

    getReg(reg, 0, mask, function(code, txt){
      if(code != 200){
        value.innerHTML = 'Error['+code+']: '+txt;
      } else {
        value.innerHTML = '0x'+parseInt(txt).toString(16)+' ('+txt+')';
      }
    });
  }

  const setXclkButton = document.getElementById('set-xclk')
  setXclkButton.onclick = () => {
    let xclk = parseInt(document.getElementById('xclk').value);

    setXclk(xclk, function(code, txt){
      if(code != 200){
        alert('Error['+code+']: '+txt);
      }
    });
  }

  const setResButton = document.getElementById('set-resolution')
  setResButton.onclick = () => {
    let start_x = parseInt(document.getElementById('start-x').value);
    let start_y = parseInt(document.getElementById('start-y').value);
    let end_x = parseInt(document.getElementById('end-x').value);
    let end_y = parseInt(document.getElementById('end-y').value);
    let offset_x = parseInt(document.getElementById('offset-x').value);
    let offset_y = parseInt(document.getElementById('offset-y').value);
    let total_x = parseInt(document.getElementById('total-x').value);
    let total_y = parseInt(document.getElementById('total-y').value);
    let output_x = parseInt(document.getElementById('output-x').value);
    let output_y = parseInt(document.getElementById('output-y').value);
    let scaling = document.getElementById('scaling').checked?1:0;
    let binning = document.getElementById('binning').checked?1:0;

    setWindow(start_x, start_y, end_x, end_y, offset_x, offset_y, total_x, total_y, output_x, output_y, scaling, binning, function(code, txt){
      if(code != 200){
        alert('Error['+code+']: '+txt);
      }
    });
  }

  const setPllButton = document.getElementById('set-pll')
  setPllButton.onclick = () => {
    var bypass = document.getElementById('bypass-pll').checked?1:0;
    var mul = parseInt(document.getElementById('mul-pll').value);
    var sys = parseInt(document.getElementById('sys-pll').value);
    var root_ = parseInt(document.getElementById('root-pll').value);
    var pre = parseInt(document.getElementById('pre-pll').value);
    var seld5 = parseInt(document.getElementById('seld5-pll').value);
    var pclken = document.getElementById('pclk-en').checked?1:0;
    var pclk = parseInt(document.getElementById('pclk-pll').value);

    setPll(bypass, mul, sys, root_, pre, seld5, pclken, pclk, function(code, txt){
      if(code != 200){
        alert('Error['+code+']: '+txt);
      }
    });
  }

  const setRegValue = (el) => {
    let reg = el.attributes.reg?parseInt(el.attributes.reg.nodeValue):0;
    let offset = el.attributes.offset?parseInt(el.attributes.offset.nodeValue):0;
    let mask = el.attributes.mask?parseInt(el.attributes.mask.nodeValue):255;
    let value = 0;
    switch (el.type) {
      case 'checkbox':
        value = el.checked ? mask : 0;
        break;
      case 'range':
      case 'text':
      case 'select-one':
        value = el.value;
        break
      default:
        return;
    }

    setReg(reg, offset, mask, value, function(code, txt){
      if(code != 200){
        alert('Error['+code+']: '+txt);
      }
    });
  }

  // Attach on change action for register elements
  document
    .querySelectorAll('.reg-action')
    .forEach(el => {
        if (el.type === 'text') {
            el.onkeyup = function(e){
                if(e.keyCode == 13){
                    setRegValue(el);
                }
            }
        } else {
            el.onchange = () => setRegValue(el)
        }
    })


  const updateRegValue = (el, value, updateRemote) => {
    let initialValue;
    let offset = el.attributes.offset?parseInt(el.attributes.offset.nodeValue):0;
    let mask = (el.attributes.mask?parseInt(el.attributes.mask.nodeValue):255) << offset;
    value = (value & mask) >> offset;
    if (el.type === 'checkbox') {
      initialValue = el.checked
      value = !!value
      el.checked = value
    } else {
      initialValue = el.value
      el.value = value
    }
  }


  const printReg = (el) => {
    let reg = el.attributes.reg?parseInt(el.attributes.reg.nodeValue):0;
    let offset = el.attributes.offset?parseInt(el.attributes.offset.nodeValue):0;
    let mask = el.attributes.mask?parseInt(el.attributes.mask.nodeValue):255;
    let value = 0;
    switch (el.type) {
      case 'checkbox':
        value = el.checked ? mask : 0;
        break;
      case 'range':
      case 'select-one':
        value = el.value;
        break
      default:
        return;
    }
    value = (value & mask) << offset;
    return '0x'+reg.toString(16)+', 0x'+value.toString(16);
  }

  const hide = el => {
    el.classList.add('hidden')
  }
  const show = el => {
    el.classList.remove('hidden')
  }

  const disable = el => {
    el.classList.add('disabled')
    el.disabled = true
  }

  const enable = el => {
    el.classList.remove('disabled')
    el.disabled = false
  }

  const updateValue = (el, value, updateRemote) => {
    updateRemote = updateRemote == null ? true : updateRemote
    let initialValue
    if (el.type === 'checkbox') {
      initialValue = el.checked
      value = !!value
      el.checked = value
    } else {
      initialValue = el.value
      el.value = value
    }

    if (updateRemote && initialValue !== value) {
      updateConfig(el);
    } else if(!updateRemote){
      if(el.id === "aec"){
        value ? hide(exposure) : show(exposure)
      } else if(el.id === "agc"){
        if (value) {
          hide(agcGain)
        } else {
          show(agcGain)
        }
      } else if(el.id === "awb_gain"){
        value ? show(wb) : hide(wb)
      } else if(el.id === "face_recognize"){
        value ? enable(enrollButton) : disable(enrollButton)
      } else if(el.id == "led_intensity"){
        value > -1 ? show(ledGroup) : hide(ledGroup)
      }
    }
  }

  function updateConfig (el) {
    let value
    switch (el.type) {
      case 'checkbox':
        value = el.checked ? 1 : 0
        break
      case 'range':
      case 'select-one':
        value = el.value
        break
      case 'button':
      case 'submit':
        value = '1'
        break
      default:
        return
    }

    const query = `${baseHost}/control?var=${el.id}&val=${value}`

    fetch(query)
      .then(response => {
        console.log(`request to ${query} finished, status: ${response.status}`)
      })
  }

  document
    .querySelectorAll('.close')
    .forEach(el => {
      el.onclick = () => {
        hide(el.parentNode)
      }
    })

  // read initial values
  fetch(`${baseHost}/status`)
    .then(function (response) {
      return response.json()
    })
    .then(function (state) {
      document
        .querySelectorAll('.default-action')
        .forEach(el => {
            updateValue(el, state[el.id], false)
        })
      document
        .querySelectorAll('.reg-action')
        .forEach(el => {
            let reg = el.attributes.reg?parseInt(el.attributes.reg.nodeValue):0;
            if(reg == 0){
              return;
            }
            updateRegValue(el, state['0x'+reg.toString(16)], false)
        })
    })

  const view = document.getElementById('stream')
  const viewContainer = document.getElementById('stream-container')
  const viewControls = document.getElementById('controls')
  const stillButton = document.getElementById('get-still')
  const streamButton = document.getElementById('toggle-stream')
  const enrollButton = document.getElementById('face_enroll')
  const closeButton = document.getElementById('close-stream')
  const saveButton = document.getElementById('save-still')
  const ledGroup = document.getElementById('led-group')

  const stopStream = () => {
    window.stop();
    streamButton.innerHTML = 'Start Stream'
  }

  const startStream = () => {

    // CONNOR THIS IS WHERE TEST IMAGES ARE LOADED
    // CONNOR REMEMBER TO DISABLE THIS TO DO STREAM


    view.src = `${streamUrl}/stream`


    // var test_images = [
    //   'https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/SMPTE_Color_Bars.svg/800px-SMPTE_Color_Bars.svg.png',
    //   'https://i.ytimg.com/vi/6XUhutX4ank/hq720.jpg?sqp=-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLDOo_c3TYl3KREOuAdg8meP8oIYXA',
    //   'https://play-lh.googleusercontent.com/ykJkrsa88dC8D4f-KPJ14APufc0I7fr69Zt1F4dHHJx8GFoKxzG_v6K5egssEcMrwprq=s256-rw',
    //   'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Animated_Wallpaper_Windows_10_-_Wallpaper_Engine.gif/1200px-Animated_Wallpaper_Windows_10_-_Wallpaper_Engine.gif'
    // ]
    // view.src = test_images[Math.floor(Math.random() * test_images.length)];



    show(viewContainer)
    show(viewControls)
    streamButton.innerHTML = 'Stop Stream'
  }

  // Attach actions to buttons
  stillButton.onclick = () => {
    stopStream()
    view.src = `${baseHost}/capture?_cb=${Date.now()}`
    show(viewContainer)
    show(viewControls)
  }

  closeButton.onclick = () => {
    stopStream()
    hide(viewContainer)
    hide(viewControls)
  }

  streamButton.onclick = () => {
    const streamEnabled = streamButton.innerHTML === 'Stop Stream'
    if (streamEnabled) {
      stopStream()
    } else {
      startStream()
    }
  }

  enrollButton.onclick = () => {
    updateConfig(enrollButton)
  }

  saveButton.onclick = () => {
    var canvas = document.createElement("canvas");
    canvas.width = view.width;
    canvas.height = view.height;
    document.body.appendChild(canvas);
    var context = canvas.getContext('2d');
    context.drawImage(view,0,0);
    try {
      var dataURL = canvas.toDataURL('image/jpeg');
      saveButton.href = dataURL;
      var d = new Date();
      saveButton.download = d.getFullYear() + ("0"+(d.getMonth()+1)).slice(-2) + ("0" + d.getDate()).slice(-2) + ("0" + d.getHours()).slice(-2) + ("0" + d.getMinutes()).slice(-2) + ("0" + d.getSeconds()).slice(-2) + ".jpg";
    } catch (e) {
      console.error(e);
    }
    canvas.parentNode.removeChild(canvas);
  }

  // Attach default on change action
  document
    .querySelectorAll('.default-action')
    .forEach(el => {
      el.onchange = () => updateConfig(el)
    })

  // Custom actions
  // Gain
  const agc = document.getElementById('agc')
  const agcGain = document.getElementById('agc_gain-group')
  agc.onchange = () => {
    updateConfig(agc)
    if (agc.checked) {
      hide(agcGain)
    } else {
      show(agcGain)
    }
  }

  // Exposure
  const aec = document.getElementById('aec')
  const exposure = document.getElementById('aec_value-group')
  aec.onchange = () => {
    updateConfig(aec)
    aec.checked ? hide(exposure) : show(exposure)
  }

  // AWB
  const awb = document.getElementById('awb_gain')
  const wb = document.getElementById('wb_mode-group')
  awb.onchange = () => {
    updateConfig(awb)
    awb.checked ? show(wb) : hide(wb)
  }

  // Detection and framesize
  const detect = document.getElementById('face_detect')
  const recognize = document.getElementById('face_recognize')
  const framesize = document.getElementById('framesize')

  framesize.onchange = () => {
    updateConfig(framesize)
    if (framesize.value > 5) {
      updateValue(detect, false)
      updateValue(recognize, false)
    }
  }

  detect.onchange = () => {
    if (framesize.value > 5) {
      alert("Please select CIF or lower resolution before enabling this feature!");
      updateValue(detect, false)
      return;
    }
    updateConfig(detect)
    if (!detect.checked) {
      disable(enrollButton)
      updateValue(recognize, false)
    }
  }

  recognize.onchange = () => {
    if (framesize.value > 5) {
      alert("Please select CIF or lower resolution before enabling this feature!");
      updateValue(recognize, false)
      return;
    }
    updateConfig(recognize)
    if (recognize.checked) {
      enable(enrollButton)
      updateValue(detect, true)
    } else {
      disable(enrollButton)
    }
  }


  // max speed setting
  const max_speed = document.getElementById('speed');
  max_speed.onchange = () => {
    car_state.speed = Number(max_speed.value);
  }

  // enter password button
  const enter_btn = document.getElementById('enter-btn');
  const pwd_1 = document.getElementById('pwd-1');
  const pwd_2 = document.getElementById('pwd-2');
  const pwd_3 = document.getElementById('pwd-3');
  
  enter_btn.onclick = () => {
    // TEST IF CODES MATCH PASSWORD
    // "robots" "are" "awesome", case doesnt matter
    if (String(pwd_1.value).toUpperCase() == 'ROBOTS' &&
        String(pwd_2.value).toUpperCase() == 'ARE' &&
        String(pwd_3.value).toUpperCase() == 'AWESOME') {

      // access granted

      showGranted();


    }
    else {
      // access denied
      showDenied();
    }
  }
  

  function showGranted() {
    const overlay = document.getElementById('popup-overlay');
    const granted = document.getElementById('popup-content-granted');

    granted.style.display = 'block';
    overlay.style.display = 'flex';
    setTimeout(() => {
      overlay.style.display = 'none';
      granted.style.display = 'none';
    }, 2000);
  }
  function showDenied() {
    const overlay = document.getElementById('popup-overlay');
    const denied = document.getElementById('popup-content-denied');

    denied.style.display = 'block';
    overlay.style.display = 'flex';
    setTimeout(() => {
      overlay.style.display = 'none';
      denied.style.display = 'none';
    }, 2000);
  }


  var baseHost = document.location.origin;

  // Function to send keypress data to the ESP32
  function sendKeyPress(key) {
    console.log(`Pressed ${key}`);
    fetch(`${baseHost}/keypress?key=${key}`)
      .then(response => {
        if (response.status !== 200) {
          console.error(`Failed to send keypress: ${response.statusText}`);
        }
      })
      .catch(err => {
        console.error(`Error sending keypress: ${err}`);
      });
  }

  function sendJsonCommand(jsonData) {
    console.log(`Sending JSON command: ${JSON.stringify(jsonData)}`);
    fetch(`${baseHost}/json_command`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(jsonData)
    })
      .then(response => {
        if (response.status !== 200) {
          console.error(`Failed to send JSON command: ${response.statusText}`);
        }
      })
      .catch(err => {
        console.error(`Error sending JSON command: ${err}`);
      });
  }

  function sendSerialCmd(text) {
    console.log(`Sending Serial command: ${text}`);
    fetch(`${baseHost}/json_command`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: text
    })
      .then(response => {
        if (response.status !== 200) {
          console.error(`Failed to send serial command: ${response.statusText}`);
        }
      })
      .catch(err => {
        console.error(`Error sending serial command: ${err}`);
      });
  }

  function movementUpdate() {
    let jsonData = null;

    if (!keyList.w || !keyList.s) { // no holding opposite directions

      if (keyList.w) {

        if (keyList.a && !keyList.d) {
          // FORWARD AND LEFT
          // jsonData = {"N": 102, "D1": 5, "D2": car_state.speed};
          jsonData = `102 5 ${car_state.speed}`;
          
        }
        else if (!keyList.a && keyList.d) {
          // FORWARD AND RIGHT
          // jsonData = {"N": 102, "D1": 7, "D2": car_state.speed};
          jsonData = `102 7 ${car_state.speed}`;
        }
        else {
          // JUST FORWARD
          // D1=0 : all motors
          // D3 : 1 clockwise, 2 counterclockwise
          // jsonData = {"H": 1, "N": 1, "D1": 0, "D2": car_state.speed, "D3": 1}

          // jsonData = {"N": 102, "D1": 1, "D2": car_state.speed};  // only turns one side??
          // jsonData = {"H": 1, "N": 3, "D1": 3, "D2": car_state.speed};
          jsonData = `3 3 ${car_state.speed}`;

        }
      }

      else if (keyList.s) {
        if (keyList.a && !keyList.d) {
          // REVERSE AND LEFT
          // jsonData = {"N": 102, "D1": 6, "D2": car_state.speed};
          jsonData = `102 6 ${car_state.speed}`;
        }
        else if (!keyList.a && keyList.d) {
          // REVERSE AND RIGHT
          // jsonData = {"N": 102, "D1": 8, "D2": car_state.speed};
          jsonData = `102 8 ${car_state.speed}`;
        }
        else {
          // JUST REVERSE
          // jsonData = {"N": 102, "D1": 2, "D2": car_state.speed}; // only turns one side for some reason
          // jsonData = {"H": 1, "N": 3, "D1": 4, "D2": car_state.speed};
          jsonData = `3 4 ${car_state.speed}`;
        }
      }

      else if (keyList.a && !keyList.d) {
        // ROTATE LEFT
        // jsonData = {"N": 102, "D1": 3, "D2": car_state.speed};
        jsonData = `102 3 ${car_state.speed}`;
      }

      else if (!keyList.a && keyList.d) {
        // ROTATE RIGHT
        // jsonData = {"N": 102, "D1": 4, "D2": car_state.speed};
        jsonData = `102 4 ${car_state.speed}`;
      }

      else {
        // stop
        // jsonData = {"H": 1, "N": 1, "D1": 0, "D2": 0, "D3": 1};
        jsonData = `1 0 0 1`;
      }

    }
    else {
      // also stop
      // jsonData = {"H": 1, "N": 1, "D1": 0, "D2": 0, "D3": 1};
      jsonData = `1 0 0 1`;
    }



    if (jsonData) {
      // sendJsonCommand(jsonData);
      sendSerialCmd(jsonData);
    }
  }

  var car_state = {
    'speed': 60,
    'angle': 90
  }
  // document.addEventListener('keydown', function (event) {
  //   const validKeys = ['q', 'w', 'e', 'a', 's', 'd', 'x'];
  //   if (validKeys.includes(event.key)) {
  //     sendKeyPress(event.key);
  //   }
  // });
  var keyList = {
    'w': false,
    'a': false,
    's': false,
    'd': false,
  };

  var animationKeys = ['1','2','3','q','e','w','a','s','d','z','x','c'];
  document.addEventListener('keydown', function (event) {
    if (event.repeat) return; // only do actions on first key down - no holding
    
    // console.log(event.key);
    // console.log(event.key == 'ArrowUp');
    let jsonData = null;

    // if (event.key === 'q') {
    //   jsonData = { "H": 1, "N": 5, "D1": 1, "D2": 180 };
    // } else if (event.key === 'e') {
    //   jsonData = { "H": 1, "N": 5, "D1": 1, "D2": 0 };
    // }

    // if (jsonData) {
    //   sendJsonCommand(jsonData);
    // }

    // add to key list
    // if (!keyList.includes(event.key) {
    //   keyList.push()
    // }
    

    // if (event.key === '1') {
    //   car_state.speed = 55;
    // }
    // else if (event.key === '2') {
    //   car_state.speed = 155;
    // }
    // else if (event.key === '3') {
    //   car_state.speed = 255;
    // }

    // // SERVOS
    // // range from 0-180, increments of 30deg
    // else if (event.key === 'q') {
    //   car_state.angle = Math.min(car_state.angle + 30, 180);
    //   // jsonData = {"H": 1, "N": 5, "D1": 1, "D2": car_state.angle};
    //   jsonData = `5 1 ${car_state.angle}`;
    // }
    // else if (event.key === 'e') {
    //   car_state.angle = Math.max(car_state.angle - 30, 0);
    //   // jsonData = {"H": 1, "N": 5, "D1": 1, "D2": car_state.angle};
    //   jsonData = `5 1 ${car_state.angle}`;
    // }


    // emergency stop
    if (event.key === 'x' || event.key === 'z' || event.key === 'c') {
      // jsonData = {"H": 1, "N": 1, "D1": 0, "D2": 0, "D3": 1};
      jsonData = `1 0 0 1`;
    }

    if (jsonData) {
      // sendJsonCommand(jsonData);
      sendSerialCmd(jsonData);
    }

    var symkey = null;
    if (event.key == 'ArrowUp') {symkey  = 'w';}
    if (event.key == 'ArrowDown') {symkey = 's';}
    if (event.key == 'ArrowLeft') {symkey = 'a';}
    if (event.key == 'ArrowRight') {symkey = 'd';}

    // DIRECTIONAL WASD
    if (Object.keys(keyList).includes(symkey)) {
      keyList[symkey] = true;


      movementUpdate();
    }


    // animation for UI
    if (animationKeys.includes(symkey)) {
        
        const target = document.querySelector(`.key[data-key="${symkey}"]`);
        if (target) target.classList.add('active');
    }   





    // custom codes
    // 0 - resets text
    if (event.key == '0') {
      pwd_1.value = "";
      pwd_2.value = "";
      pwd_3.value = "";
    }
  });
  document.addEventListener('keyup', function (event) {
    if (event.repeat) return;

    let jsonData = null;

    // if (event.key === 'q') {
    //   console.log("released!");
    // }

    var symkey = null;
    if (event.key == 'ArrowUp') {symkey  = 'w';}
    if (event.key == 'ArrowDown') {symkey = 's';}
    if (event.key == 'ArrowLeft') {symkey = 'a';}
    if (event.key == 'ArrowRight') {symkey = 'd';}



    if (Object.keys(keyList).includes(symkey)) {
      keyList[symkey] = 0;

      movementUpdate();
    }


    // // console.log(keyList);
    // if (jsonData) {
    //   sendJsonCommand(jsonData);
    // }



    // animation for UI
    if (animationKeys.includes(symkey)) {
        const target = document.querySelector(`.key[data-key="${symkey}"]`);
        if (target) target.classList.remove('active');
    }   
  });


  // set up buttons for regular clicking
  // mousedown/mouseup
  let activeKey = null;

  const key_buttons = document.querySelectorAll('.key')
  key_buttons.forEach((button) => {
    button.addEventListener('mousedown', () => {
      activeKey = button;
      button.classList.add('active');
      // console.log("CLICKED");

      let key = button.getAttribute('data-key');
      if (key) {
        const event = new KeyboardEvent("keydown", {
          key: key,
        });
        document.dispatchEvent(event);
      }


    });
    button.addEventListener('touchstart', () => {
      activeKey = button;
      button.classList.add('active');
      // console.log("RELEASED");

      
      let key = button.getAttribute('data-key');
      if (key) {
        const event = new KeyboardEvent("keydown", {
          key: key,
        });
        document.dispatchEvent(event);
      }
    }, { passive: true });
  })
  

  const release = () => {
    if (activeKey) {
      
      let key = activeKey.getAttribute('data-key');
      if (key) {
        const event = new KeyboardEvent("keyup", {
          key: key,
        });
        document.dispatchEvent(event);
      }

      activeKey.classList.remove('active');
      activeKey = null;
    }
  }

  window.addEventListener('mouseup', release);
  window.addEventListener('touchend', release);




  startStream();  // temp initial start stream
})



        </script>
    </body>
</html>
